{"version":3,"sources":["app.js","FloatVideo.js"],"names":["document","addEventListener","Animate","init","w","this","duration","run","options","start","performance","now","animationFrame","requestAnimationFrame","animate","time","timeFraction","progress","draw","bottom","el","defW","clientWidth","style","position","transform","top","body","close","cancelAnimation","cancelAnimationFrame","VideoFloat","containerID","container","getElementById","video","getElementsByTagName","overlay","createElement","parentElement","height","clientHeight","appendChild","classList","add","dataset","popup","coordinates","getBoundingClientRect","create","className","contains","display","remove","flag","toOverlay","ds","z","op","ch","zIndex","opacity","static"],"mappings":"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","file":"app.js","sourcesContent":["\"use strict\";\r\n\r\n","(function () {\r\n\tdocument.addEventListener(\"DOMContentLoaded\", function () {\r\n\r\n\t\t//module Animate\r\n\t\tconst Animate = {\r\n\t\t\tinit(w) {\r\n\t\t\t\tthis.duration = 1000;\r\n\t\t\t\tthis.w = w;\r\n\t\t\t},\r\n\r\n\t\t\trun(options) {\r\n\t\t\t\t//options = {duration, timing(timeFraction), draw}\r\n\t\t\t\toptions.duration = Animate.duration;;\r\n\t\t\t\tvar start = performance.now();\r\n\r\n\t\t\t\tvar animationFrame;\r\n\r\n\t\t\t\tthis.animationFrame = requestAnimationFrame(function animate(time) {\r\n\t\t\t\t\tvar timeFraction = (time - start) / options.duration;\r\n\t\t\t\t\tif (timeFraction > 1) timeFraction = 1;\r\n\r\n\t\t\t\t\tvar progress = timeFraction;\r\n\r\n\t\t\t\t\toptions.draw(progress);\r\n\r\n\t\t\t\t\tif (timeFraction < 1) {\r\n\t\t\t\t\t\trequestAnimationFrame(animate);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\tbottom(el) {\r\n\t\t\t\tvar defW = el.clientWidth;\r\n\r\n\t\t\t\tel.style.position = \"fixed\";\r\n\r\n\t\t\t\tAnimate.run({\r\n\t\t\t\t\tdraw: function (progress) {\r\n\t\t\t\t\t\tel.style.bottom = (100 - (progress * 100)) + \"%\";\r\n\t\t\t\t\t\tel.style.transform = \"scale(\" + (1 - (progress * (1 - Animate.w / defW))) + \")\";\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\ttop(el) {\r\n\t\t\t\t//if width=100%\r\n\t\t\t\tvar defW = document.body.clientWidth;\r\n\r\n\t\t\t\tAnimate.run({\r\n\t\t\t\t\tdraw: function (progress) {\r\n\t\t\t\t\t\tel.style.top = 0;\r\n\t\t\t\t\t\tel.style.bottom = \"auto\";\r\n\t\t\t\t\t\tel.style.transform = \"scale(\" + ((Animate.w / defW) + (progress * (1 - Animate.w / defW))) + \")\";\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\tclose(el) {\r\n\t\t\t\tvar defW = el.clientWidth;\r\n\r\n\t\t\t\tAnimate.run({\r\n\t\t\t\t\tdraw: function (progress) {\r\n\t\t\t\t\t\tel.style.transform = \"scale(\" + (1 - (progress * (1 - Animate.w / defW))) + \")\";\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\tcancelAnimation() {\r\n\t\t\t\tcancelAnimationFrame(Animate.animationFrame);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t//module Video\r\n\t\tconst VideoFloat = {\r\n\t\t\tinit(containerID) {\r\n\t\t\t\tthis.container = document.getElementById(\"video-container\");  //block with the video\r\n\t\t\t\tthis.video = this.container.getElementsByTagName(\"video\")[0]; //block with video\r\n\t\t\t\tthis.overlay = document.createElement(\"div\");\r\n\r\n\t\t\t\tthis.container.parentElement.style.height = this.container.clientHeight + \"px\";\r\n\r\n\t\t\t\t//overlay\r\n\t\t\t\tthis.container.appendChild(this.overlay);\r\n\t\t\t\tthis.overlay.classList.add(\"overlay\");\r\n\t\t\t\tthis.overlay.dataset.popup = 0;\r\n\t\t\t\tthis.overlay.addEventListener(\"click\", function() {\r\n\t\t\t\t\tif(this.dataset.popup == 0) VideoFloat.popup(\"open\");\r\n\t\t\t\t\telse VideoFloat.popup(\"close\");\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\tcoordinates() {\r\n\t\t\t\treturn VideoFloat.container.parentElement.getBoundingClientRect();\r\n\t\t\t},\r\n\r\n\t\t\tcreate(className) {\r\n\t\t\t\tif (!VideoFloat.container.classList.contains(className)) {\r\n\t\t\t\t\tVideoFloat.container.classList.add(className);\r\n\t\t\t\t\tVideoFloat.overlay.style.display = \"block\";\r\n\t\t\t\t\tAnimate.bottom(VideoFloat.container);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\tremove(className) {\r\n\t\t\t\tif (VideoFloat.container.classList.contains(className)) {\r\n\t\t\t\t\tVideoFloat.container.classList.remove(className);\r\n\t\t\t\t\tVideoFloat.overlay.style.display = \"none\";\r\n\t\t\t\t\tAnimate.top(VideoFloat.container);\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(VideoFloat.overlay.dataset.popup == 1) {\r\n\t\t\t\t\t\tVideoFloat.video.classList.remove(\"popup\");\r\n\t\t\t\t\t\tVideoFloat.overlay.dataset.popup = 0;\r\n\t\t\t\t\t\tVideoFloat.overlay.style = \"\";\r\n\t\t\t\t\t\t//stop animate\r\n\t\t\t\t\t\tAnimate.cancelAnimation();\r\n\t\t\t\t\t}\t\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\tpopup(flag) {\r\n\t\t\t\tswitch(flag) {\r\n\t\t\t\t\tcase \"open\": \r\n\t\t\t\t\t\ttoOverlay(1, \"-1\", 0.5, \"100%\");\r\n\t\t\t\t\t\tAnimate.top(VideoFloat.container);\r\n\t\t\t\t\t\tVideoFloat.video.classList.add(\"popup\");\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"close\": \r\n\t\t\t\t\t\ttoOverlay(0, 0, 0, \"auto\");\r\n\t\t\t\t\t\tAnimate.close(VideoFloat.container);\r\n\t\t\t\t\t\tVideoFloat.video.classList.remove(\"popup\");\r\n\t\t\t\t\t\tVideoFloat.container.style.bottom = 0;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction toOverlay(ds, z, op, ch) {\r\n\t\t\t\t\tVideoFloat.overlay.dataset.popup = ds;\r\n\t\t\t\t\tVideoFloat.overlay.style.zIndex = z;\r\n\t\t\t\t\tVideoFloat.overlay.style.opacity = op;\r\n\t\t\t\t\tVideoFloat.container.style.height = ch;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\tstatic() {\r\n\t\t\t\tVideoFloat.container.style.position = \"static\";\r\n\t\t\t}\r\n\t\t};\r\n\r\n\r\n\t\t//---- run script ----//\r\n\t\tVideoFloat.init(\"video-container\");\r\n\r\n\t\t//page scrolling\r\n\t\tdocument.addEventListener(\"scroll\", function () {\r\n\t\t\tvar bottom = VideoFloat.coordinates().bottom;\r\n\t\t\tvar top    = VideoFloat.coordinates().top;\r\n\t\t\tvar w      = 200; //min width fot container\r\n\r\n\t\t\tAnimate.init(w);\r\n\r\n\t\t\tif (bottom <= 0) VideoFloat.create(\"fix\", w);\r\n\t\t\telse VideoFloat.remove(\"fix\");\r\n\r\n\t\t\tif(top >= 0) VideoFloat.static();\r\n\t\t});\r\n\t});\r\n})();"]}